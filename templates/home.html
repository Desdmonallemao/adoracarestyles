{% extends 'base.html' %}
{% load star_rating %}
{% block content %}

<!-- BANNIÃˆRE -->
<div class="text-center p-5 mb-5 banner-bg rounded-4 shadow-sm">
  <h1 class="display-5 fw-bold text-white">Bienvenue sur Adora Care Style ðŸ’„</h1>
  <p class="lead text-white mb-4">Les meilleurs soins cosmÃ©tiques et capillaires livrÃ©s Ã  domicile</p>
  <a href="{% url 'search_products' %}" class="btn btn-primary btn-lg shadow">Rechercher un produit</a>
</div>

<!-- CATÃ‰GORIES -->
<div class="row mb-5">
  {% for cat in categories %}
  <div class="col-md-3 col-sm-6 mb-4">
    <div class="card category-card h-100 text-center shadow-sm border-0 rounded-4 p-4">
      <h5 class="mb-0">
        <a href="{% url 'products_by_category' cat.slug %}" class="text-decoration-none category-link">
          {{ cat.name }}
        </a>
      </h5>
    </div>
  </div>
  {% endfor %}
</div>

<!-- DERNIERS PRODUITS -->
<h2 class="mb-4 section-title">Nouveaux Produits</h2>
<div class="row mb-5">
  {% for product in latest_products %}
  <div class="col-md-6 col-lg-4 mb-4">
    <div class="card product-card h-100 shadow-sm rounded-4 overflow-hidden d-flex flex-column">
      
      <!-- Image taille rÃ©elle -->
      {% if product.images.first %}
      <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" class="img-fluid w-100 full-img" loading="lazy">
      {% else %}
      <div class="image-placeholder">
        <i class="bi bi-image" style="font-size:4rem;"></i>
      </div>
      {% endif %}

      <!-- Contenu -->
      <div class="card-body d-flex flex-column justify-content-between">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h6 class="fw-bold mb-0 text-dark">{{ product.name }}</h6>
          <span class="fw-semibold text-primary">{{ product.price|floatformat:0 }} FCFA</span>
        </div>
        <p class="text-muted small mb-3">{{ product.description|truncatewords:20 }}</p>
        <a href="{% url 'product_detail' product.id %}" class="btn btn-outline-primary btn-sm shadow-sm mt-auto align-self-start">Voir</a>
      </div>

    </div>
  </div>
  {% endfor %}
</div>

<!-- AVIS CLIENTS -->
<h2 class="mb-4 section-title">Ce que disent nos clients</h2>
<div class="row mb-5">
  {% for t in testimonials %}
  <div class="col-md-4 mb-4">
    <div class="card testimonial-card p-4 shadow-sm rounded-4 h-100">
      <strong class="text-primary">{{ t.name }}</strong>
      <p class="text-warning mb-2">{% render_stars t.rating %}</p>
      <p class="text-muted fst-italic">{{ t.message|truncatewords:20 }}</p>
    </div>
  </div>
  {% endfor %}
</div>

<!-- ARTICLES BLOG -->
<h2 class="mb-4 section-title">Conseils BeautÃ©</h2>
<div class="row mb-5">
  {% for post in latest_posts %}
  <div class="col-md-6 mb-4">
    <div class="card blog-card shadow-sm rounded-4 overflow-hidden h-100 d-flex flex-column">
      {% if post.image %}
      <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid w-100 full-img" loading="lazy">
      {% else %}
      <div class="image-placeholder">
        <i class="bi bi-image" style="font-size:5rem;"></i>
      </div>
      {% endif %}
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ post.title }}</h5>
        <p class="card-text text-muted">{{ post.content|truncatewords:25 }}</p>
        <a href="{% url 'blog_detail' post.slug %}" class="btn btn-outline-secondary mt-auto align-self-start btn-sm shadow-sm">Lire</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- CONTACT -->
<div class="text-center bg-primary text-white p-5 rounded-4 shadow">
  <h4 class="mb-3">Besoin dâ€™aide ?</h4>
  <p class="mb-4 fs-5">Contactez-nous directement par WhatsApp</p>
  <a href="https://wa.me/237690389086" class="btn btn-light btn-lg fw-semibold shadow-sm" target="_blank" rel="noopener">
    ðŸ“ž WhatsApp : +237 690 389 086
  </a>
</div>

<!-- STYLE -->
<style>
  :root {
    --primary-color: #6f42c1;
    --secondary-color: #0d6efd;
  }

  .banner-bg {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  }

  .section-title {
    color: var(--primary-color);
    font-weight: 700;
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 0.3rem;
    max-width: fit-content;
    margin-bottom: 2rem;
  }

  .category-card {
    background-color: #f3f0ff;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .category-card:hover {
    background-color: var(--primary-color);
    color: white;
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgb(111 66 193 / 0.4);
  }

  .category-link {
    color: var(--primary-color);
    font-size: 1.1rem;
    transition: color 0.3s ease;
  }

  .category-card:hover .category-link {
    color: white;
  }

  .product-card {
    border: none;
  }

  .full-img {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
    transition: transform 0.3s ease-in-out;
    border-top-left-radius: 1rem;
    border-top-right-radius: 1rem;
  }

  .product-card:hover .full-img {
    transform: scale(1.03);
  }

  .image-placeholder {
    width: 100%;
    height: 220px;
    background-color: #e9ecef;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #adb5bd;
    border-top-left-radius: 1rem;
    border-top-right-radius: 1rem;
  }

  .testimonial-card {
    background-color: #e8e5ff;
  }

  .btn-primary {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    transition: background-color 0.3s ease;
  }

  .btn-primary:hover {
    background-color: #5a34a1;
    border-color: #5a34a1;
  }

  .btn-outline-primary {
    color: var(--primary-color);
    border-color: var(--primary-color);
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .btn-outline-primary:hover {
    background-color: var(--primary-color);
    color: white;
  }

  .btn-outline-secondary {
    color: var(--secondary-color);
    border-color: var(--secondary-color);
  }

  .btn-outline-secondary:hover {
    background-color: var(--secondary-color);
    color: white;
  }
</style>

{% endblock %}
