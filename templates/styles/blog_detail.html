{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }} - Conseils Beauté{% endblock %}
{% block meta_description %}{{ post.content|truncatewords:25 }}{% endblock %}
{% block og_title %}{{ post.title }} - Blog Adora{% endblock %}
{% block og_description %}{{ post.content|truncatewords:30 }}{% endblock %}
{% block og_image %}
  {% if post.image %}
    {{ request.scheme }}://{{ request.get_host }}{{ post.image.url }}
  {% else %}
    {{ request.scheme }}://{{ request.get_host }}{% static 'images/a1.jpg' %}
  {% endif %}
{% endblock %}

{% block content %}
<div class="container py-4">
  <!-- En-tête avec image -->
  <div class="card mb-4 border-0 shadow-sm rounded-4 overflow-hidden">
    {% if post.image %}
      <img src="{{ post.image.url }}" class="w-100" style="height: 350px; object-fit: cover;" alt="{{ post.title }}">
    {% endif %}
    <div class="card-body bg-light">
      <h1 class="card-title fw-bold text-dark">{{ post.title }}</h1>
      <p class="text-muted small">Publié le {{ post.created_at|date:"d M Y" }}</p>
    </div>
  </div>

  <!-- Contenu de l'article -->
  <div class="bg-white p-4 rounded-4 shadow-sm mb-4" style="line-height: 1.8;">
    {{ post.content|linebreaks }}
  </div>

  <!-- Bouton retour -->
  <a href="{% url 'blog_list' %}" class="btn btn-outline-secondary mb-4">
    ← Retour aux conseils beauté
  </a>

  <!-- Partage -->
  <div class="mt-4">
    <h5 class="mb-3">Partager cet article :</h5>
    <div class="d-flex gap-2 flex-wrap">
      <a class="btn btn-success btn-sm"
         href="https://wa.me/?text={{ request.build_absolute_uri|urlencode }}"
         target="_blank">
        <i class="bi bi-whatsapp"></i> WhatsApp
      </a>

      <a class="btn btn-primary btn-sm"
         href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri|urlencode }}"
         target="_blank">
        <i class="bi bi-facebook"></i> Facebook
      </a>

      <a class="btn btn-danger btn-sm"
         href="https://www.instagram.com/"
         target="_blank">
        <i class="bi bi-instagram"></i> Instagram
      </a>
    </div>
  </div>
</div>

<!-- Styles personnalisés -->
<style>
  h1.card-title {
    font-size: 2rem;
  }

  .card-body.bg-light {
    background: linear-gradient(135deg, #dcd3f6, #cce0ff);
  }

  .btn-outline-secondary:hover {
    background-color: #6f42c1;
    color: white;
    border-color: #6f42c1;
  }

  .btn.btn-sm i {
    margin-right: 5px;
  }
</style>
{% endblock %}
